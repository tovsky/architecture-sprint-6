# architecture-sprint-6
## Exc3

## Текущие проблемы и риски, которые связаны с планируемым ростом нагрузки.
- Сервисы core-app и ins-comp-settlement синхронно запрашивают информацию ins-product-aggregator.
    ins-product-aggregator синхронно запрашивает информацию от всех страховых (сейчас 5, но будут новые подключения).
    Даже если ins-product-aggregator будет запрашивать информацию у страховых в многопоточном режиме, 
    то минимальное время ответ сервиса ins-product-aggregator это максимальное время ответа одной из страховых + доп время на агрегацию.
    В случае технического сбоя одной из страховых или долгого времени ответа, мы получаем сбои работы в сервисе ins-product-aggregator 
    и в запрашиваемых у него сервисах core-app и ins-comp-settlement.
    Проблемы с работой уже есть, и в случае увеличение количества подключенных страховых ситуации сбоев будут увеличиваться.
- Сервисы обращаются к ins-product-aggregator с разными интервалами времени: 1 раз в 15 минут, 1 раз в сутки.
  Это может приводить к неактуальной информации о предложениях от страховой.
- Дополнительно сервис ins-comp-settlement раз в сутки осуществляет запрос в core-app по REST API. 
    В случае увеличения количества оформленных страховок, в случае частично обработанной информации на стороне ins-comp-settlement, 
    будем получать увеличенную нагрузку и проблему с частично обработанной информацией о страховках, которую сложно отследить и правильно дополнить.

## Вывод
Хорошим решением будет внедрение Event-Driven архитектуру, например с использованием Kafka.
Для решения проблемы двойной записи и увеличения гарантии публикации сообщений, в сервисе ins-product-aggregator можно внедрить Transactional outbox. 

### Обновленная схема доступна по url
- https://drive.google.com/file/d/1LuujpSL-gozjrzHO_v7q3f7haqEYvz4O/view?usp=sharing
